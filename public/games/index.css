@import url("../components/shared.css");

/* Lucide Icons */
[data-lucide] {
	display: inline-flex;
	align-items: center;
	justify-content: center;

	& svg {
		width: 100%;
		height: 100%;
		color: inherit;
	}
}

.dot [data-lucide] svg {
	width: 0.6rem;
	height: 0.6rem;
}

/* Header */
header {
	position: sticky;
	top: 0;
	z-index: 50;
	background: var(--bg);
	border-bottom: 1px solid var(--br);
	padding: 1rem 1.5rem !important;
	margin-bottom: 0 !important;
	gap: 1.25rem;
}

/* Input Styling */
input {
	flex: 1;
	min-width: 14rem;
	background: rgba(255, 255, 255, 0.03);
	border: 1px solid var(--br);
	color: var(--hl);
	padding: 0.5rem 0.875rem;
	outline: none;
	font: inherit;
	letter-spacing: inherit;
	transition:
		border-color var(--transition-main),
		background var(--transition-main),
		box-shadow var(--transition-main);

	&::placeholder {
		color: var(--fg);
		opacity: 0.7;
	}

	&:hover {
		border-color: var(--fg);
		background: rgba(255, 255, 255, 0.05);
	}

	&:focus {
		border-color: var(--accent);
		background: rgba(241, 80, 37, 0.04);
		box-shadow: 0 0 0 2px rgba(241, 80, 37, 0.08);
	}
}

#gameSearch {
	margin-bottom: 0;
}

/* Games Grid */
#gameList {
	display: grid;
	grid-template-columns: repeat(
		auto-fill,
		minmax(clamp(200px, 90vw, 260px), 1fr)
	);
	gap: 0.75rem;
}

.game-card {
	padding: 1.25rem;
	border: 1px solid var(--br);
	cursor: pointer;
	transition:
		border-color var(--transition-main),
		background var(--transition-main);
	display: flex;
	align-items: center;
	justify-content: center;
	min-height: 4rem;
	text-align: center;
	font-size: 0.8rem;
	font-weight: 500;
	font-family: var(--font-display);
	letter-spacing: 0.08em;
	background: rgba(255, 255, 255, 0.005);

	&:hover {
		border-color: var(--accent);
		color: var(--hl);
		background: rgba(241, 80, 37, 0.08);
	}
}

/* Game Window */
#window-overlay {
	position: fixed;
	inset: 0;
	background: rgba(0, 0, 0, 0.5);
	display: none;
	place-items: center;
	justify-content: center;
	z-index: 676;
	backdrop-filter: blur(4px);
}

#game-window {
	width: clamp(80vw, 90vw, 100vw);
	height: clamp(70vh, 85vh, 100vh);
	background: var(--bg);
	border: 1px solid var(--br);
	border-radius: 0.5rem;
	display: flex;
	flex-direction: column;
	overflow: hidden;
	box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
	transform: translateY(40px) scale(0.92);
	opacity: 0;
	transition:
		transform 0.3s ease,
		opacity 0.3s ease;

	&.active {
		transform: translateY(0) scale(1);
		opacity: 1;
	}

	&.maximized {
		width: 100vw;
		height: 100vh;
		border-radius: 0;
		border: none;
	}

	&.minimized {
		transform: translateY(100vh) scale(0.6);
		opacity: 0;
		pointer-events: none;
	}
}

#window-bar {
	display: flex;
	align-items: center;
	background: var(--br);
	padding: 0.6rem 1rem;
	justify-content: space-between;
	user-select: none;
	touch-action: none;
	cursor: move;
	border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.window-bar-buttons {
	display: flex;
	gap: 0.5rem;
}

.dot {
	width: 0.75rem;
	height: 0.75rem;
	border: none;
	border-radius: 50%;
	cursor: pointer;
	transition:
		transform var(--transition-main),
		opacity var(--transition-main);
	padding: 0;
	display: flex;
	align-items: center;
	justify-content: center;

	& i {
		display: none;
	}

	&:hover {
		transform: scale(1.15);
	}

	&:active {
		transform: scale(0.9);
	}

	&.close {
		background: #ff5f57;
	}

	&.min {
		background: #febc2e;
	}

	&.max {
		background: #28c840;
	}
}

#win-title {
	font-size: clamp(0.65rem, 1vw, 0.85rem);
	font-weight: 600;
	opacity: 0.6;
}

#game-frame {
	flex: 1;
	border: none;
	background: #000;
}

#restore-btn {
	position: fixed;
	bottom: 2rem;
	left: 50%;
	transform: translateX(-50%);
	background: var(--br);
	color: var(--fg);
	padding: 0.6rem 1.2rem;
	border: 1px solid var(--br);
	border-radius: 0.3rem;
	font-size: 0.7rem;
	cursor: pointer;
	display: none;
	z-index: 677;
	transition:
		color var(--transition-main),
		border-color var(--transition-main);

	&:hover {
		color: var(--accent);
		border-color: var(--accent);
	}
}

/* Settings Modal */
.modal {
	position: fixed;
	inset: 0;
	background: rgba(0, 0, 0, 0.9);
	display: none;
	align-items: center;
	justify-content: center;
	z-index: 1000;
	animation: fadeIn 0.2s ease-out;

	&.active {
		display: flex;
	}
}

@keyframes fadeIn {
	from {
		opacity: 0;
	}
	to {
		opacity: 1;
	}
}

@keyframes slideUp {
	from {
		transform: translateY(20px);
		opacity: 0;
	}
	to {
		transform: translateY(0);
		opacity: 1;
	}
}

.modal-content {
	background: var(--bg);
	border: 1px solid var(--br);
	border-radius: 8px;
	padding: clamp(1.5rem, 5vw, 2rem);
	width: min(90%, 400px);
	display: flex;
	flex-direction: column;
	gap: 1.5rem;
	box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
	animation: slideUp 0.3s cubic-bezier(0.16, 1, 0.3, 1);

	& h3 {
		margin: 0;
		font-size: clamp(0.75rem, 2vw, 0.95rem);
		color: var(--hl);
		font-family: var(--font-display);
		font-weight: 600;
		border-bottom: 1px solid var(--br);
		padding-bottom: 1rem;
	}
}

.setting-item {
	display: flex;
	flex-direction: column;
	gap: 0.6rem;

	& label {
		font-size: 0.65rem;
		color: var(--fg);
		font-weight: 500;
	}

	&.row {
		flex-direction: row;
		justify-content: space-between;
		align-items: center;

		& input {
			flex: 0;
			min-width: auto;
			width: 1rem;
			height: 1rem;
			cursor: pointer;
		}
	}

	& input:not([type="checkbox"]) {
		background: rgba(255, 255, 255, 0.02);
		border: 1px solid var(--br);
		border-radius: 4px;
		color: var(--hl);
		font-size: 0.75rem;
		padding: 0.6rem 0.75rem;
		font: inherit;
		transition:
			border-color var(--transition-main),
			background var(--transition-main);

		&::placeholder {
			color: var(--fg);
		}

		&:hover {
			border-color: var(--fg);
			background: rgba(255, 255, 255, 0.04);
		}

		&:focus {
			outline: none;
			border-color: var(--accent);
			background: rgba(241, 80, 37, 0.05);
		}
	}
}

.modal-buttons {
	display: flex;
	gap: 0.75rem;
	margin-top: 1rem;

	& button {
		flex: 1;
		background: transparent;
		border: 1px solid var(--br);
		color: var(--fg);
		padding: 0.65rem 0.75rem;
		cursor: pointer;
		text-transform: uppercase;
		font-family: var(--font-display);
		font-size: 0.65rem;
		font-weight: 600;
		letter-spacing: 0.08em;
		border-radius: 4px;
		transition:
			background var(--transition-main),
			border-color var(--transition-main),
			color var(--transition-main);

		&.save-btn {
			background: transparent;
			border-color: var(--accent);
			color: var(--accent);
		}

		&.save-btn:hover {
			background: rgba(241, 80, 37, 0.1);
			border-color: var(--accent-light);
			color: var(--accent-light);
		}

		&.close-btn {
			border-color: var(--br);
			color: var(--fg);
		}

		&.close-btn:hover {
			background: rgba(255, 255, 255, 0.04);
			border-color: var(--fg);
			color: var(--hl);
		}
	}
}
